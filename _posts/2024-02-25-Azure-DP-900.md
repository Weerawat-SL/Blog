---
layout: post
title:  "DP-900: Microsoft Azure Data Fundamentals/เตรียมสอบ"
author: "Weerawat"
tags: Certificate_Exam #[tag1, tag2, tag3]
opengraph: /assets/image/DE.jpg
# name: Jane Doe
# position: Developer
---
![](https://media.licdn.com/dms/image/D4E12AQFD9F7FwpVCOA/article-cover_image-shrink_720_1280/0/1673683522327?e=2147483647&v=beta&t=zwIDGzaIM3VFEbF7lzgmKwpfH7WE0usU4AVPQLAqVaU){: width="800" }

---

**Table of Contents**

- [Overview](#overview)
  - [รูปแบบการสอบ และความต้องการ](#รูปแบบการสอบ-และความต้องการ)
  - [เนื้อหาที่ออกสอบ (Skills measured )](#เนื้อหาที่ออกสอบ-skills-measured-)
- [**Core data concepts**](#core-data-concepts)
  - [Type of data file](#type-of-data-file)
  - [Type of data file formats](#type-of-data-file-formats)
  - [Types of databases](#types-of-databases)
    - [Relational databases](#relational-databases)
    - [Non-relational databases](#non-relational-databases)
  - [OLTP vs OLAP on data workloads](#oltp-vs-olap-on-data-workloads)
    - [Transaction System (OLTP)](#transaction-system-oltp)
    - [Analytical System (OLAP)](#analytical-system-olap)
    - [OLTP vs OLAP](#oltp-vs-olap)
  - [Roles and Responsibilities](#roles-and-responsibilities)
    - [Database Administrators](#database-administrators)
    - [Data Engineer](#data-engineer)
    - [Data Analytic](#data-analytic)
- [Relational data on Azure](#relational-data-on-azure)
  - [Characteristics of Relational data](#characteristics-of-relational-data)
      - [Relational database use cases](#relational-database-use-cases)
      - [Benefits of Relational Database](#benefits-of-relational-database)
    - [Normalization](#normalization)
    - [Structured Query Language (SQL)](#structured-query-language-sql)
    - [Relational Database Objects](#relational-database-objects)
      - [Clustered Index](#clustered-index)
      - [View](#view)
  - [relational Azure data services](#relational-azure-data-services)
      - [Provisioning and Deployment](#provisioning-and-deployment)
      - [Methods of Provisioning and Deployment](#methods-of-provisioning-and-deployment)
    - [Azure SQL database](#azure-sql-database)
    - [Azure IaaS vs PaaS database offerings](#azure-iaas-vs-paas-database-offerings)
    - [Azure Database Deployment Options](#azure-database-deployment-options)
    - [Azure SQL Database vs Azure SQL Data Warehouse](#azure-sql-database-vs-azure-sql-data-warehouse)
    - [Azure Database service](#azure-database-service)
      - [MYSQL](#mysql)
      - [MariaDB](#mariadb)
      - [PostgreSQL](#postgresql)
      - [Migrate data to Azure](#migrate-data-to-azure)
    - [Identify Query Tools](#identify-query-tools)
    - [Introduction to SQL](#introduction-to-sql)
    - [DDL vs DML vs DCL](#ddl-vs-dml-vs-dcl)
    - [Identify the right data offering](#identify-the-right-data-offering)
    - [Identify the right data offering for a relational workload](#identify-the-right-data-offering-for-a-relational-workload)
- [Non-relational data on Azure](#non-relational-data-on-azure)
  - [Introduction to NoSQL](#introduction-to-nosql)
    - [SQL vs NoSQL](#sql-vs-nosql)
    - [4 Types of NoSQL databases](#4-types-of-nosql-databases)
    - [NoSQL Offerings by Microsoft Azure](#nosql-offerings-by-microsoft-azure)
    - [Why Cosmos DB?](#why-cosmos-db)
    - [Why Cosmos DB?](#why-cosmos-db-1)
- [Analytics workload on Azure](#analytics-workload-on-azure)
  - [Data ingestion and processing](#data-ingestion-and-processing)
    - [Data Ingestion](#data-ingestion)
    - [Data Processing](#data-processing)
  - [ETL vs ELT](#etl-vs-elt)
    - [ETL Extract, Transform, and Load](#etl-extract-transform-and-load)
    - [ELT Extract, Load, and Transform](#elt-extract-load-and-transform)
  - [Data Warehouse](#data-warehouse)
    - [Star Schema](#star-schema)
    - [Snowflake dimensions](#snowflake-dimensions)
    - [Why Warehousing in Cloud?](#why-warehousing-in-cloud)
  - [Azure Synapse Analytics](#azure-synapse-analytics)
  - [HDInsight](#hdinsight)
  - [Big Data Architecture](#big-data-architecture)
    - [Batch Processing](#batch-processing)
    - [Real Time Processing Architecture](#real-time-processing-architecture)
    - [Azure Stream Analytics](#azure-stream-analytics)
    - [Batch vs Streaming](#batch-vs-streaming)
    - [Data Lake](#data-lake)
    - [Data Lake Gen2 Hierarchical namespace](#data-lake-gen2-hierarchical-namespace)
    - [Azure Data Factory](#azure-data-factory)
    - [Azure Data Factory Components](#azure-data-factory-components)
    - [Data Factory Triggers](#data-factory-triggers)
  - [Azure Databricks ](#azure-databricks-)
  - [Power BI](#power-bi)
    - [Core Concepts of Data Modeling](#core-concepts-of-data-modeling)
      - [Tables and schema](#tables-and-schema)
      - [Attribute hierarchies](#attribute-hierarchies)
      - [Analytical modeling in Microsoft Power BI](#analytical-modeling-in-microsoft-power-bi)
    - [visualizations types](#visualizations-types)
- [Retired Topic](#retired-topic)
  - [Microsoft Fabric](#microsoft-fabric)

---

## Overview

DP-900: Microsoft Azure Data Fundamentals เป็น 1 ใน 3 Certificate เริ่มต้นจากทาง Microsoft Azure ที่ว่าด้วยเรื่องของ concept ของ Data ในยุคปัจจุบันหลังมีการเข้ามาของ Big data ,Cloud Provider และ Modern Data Architecture โดยจะเน้นไปที่การอธิบายรูปแบบของ Service ต่างๆ บนAzure ,ความเหมาะสมในการใช้ร่วมกับ Data รูปแบบต่างๆ และจุดแข็ง-จุดอ่อน/ข้อดี-ข้อเสีย/ข้อเปรียบเทียบ ของServiceทั้งหมด

### รูปแบบการสอบ และความต้องการ

- ไม่จำเป็นต้องสอบตัวอื่นก่อน
- ค่าสอบ 55 USD (@ thailand 26/02/2024)
- ผมสอบที่ศูนย์ของTrainocate ซึ่งมีหลายที่ให้สมัครได้ สามารถตรวจสอบสถานที่และวันที่เปิดสอบ ของทุกศูนย์สอบ ได้ที่นี่[Exam_Link]
- ข้อสอบมีแบบ
  - เลือก 1 ข้อ
  - เลือก หลาย ข้อ
  - เชื่อมโยง/จับคู่
  - ถูก/ผิด
- เกณสอบผ่าน คือ 700/1000 ไม่ได้หมายถึง 70% เพราะ บางข้อ มีมากว่า 1 คะแนน
- เมื่อสอบผ่านแล้ว ใบCertificate ตัวนี้ จะไม่มีวันหมดอายุ

[Exam_Link]: <https://learn.microsoft.com/en-us/credentials/certifications/exams/dp-900/> "Exam_Link"

### เนื้อหาที่ออกสอบ (Skills measured )

![](/assets/DP900/Syllabus.png)

***เนื้อหาจะมีการเปลี่ยนแปลงเรื่อยๆ สามารถตรวจสอบได้ที่ **[Study guide for Exam DP-900](https://learn.microsoft.com/en-us/credentials/certifications/resources/study-guides/dp-900)**
***

มีการสอบ 4 หัวข้อหลักๆคือ

- **[Explore core data concepts](#core-data-concepts)**  (25–30%) [Link](https://learn.microsoft.com/en-au/training/paths/azure-data-fundamentals-explore-core-data-concepts/)
  - อธิบายคุณสมบัติของ Data
    - อธิบาย [Type of data formats](#Type-of-data-formats) (structured data, semi-structured, unstructured data)
    - อธิบาย [Type of file formats](#Type-of-file-formats) (EX. CSV,JSON,BLOB,AVRO,ORC,Parquet)
    - อธิบาย [Types of databases](#types-of-databases) (Relational, NoSQL) ***
    - อธิบาย [features บน data workloads ทั่วไป](#oltp-vs-olap-on-data-workloads)
      - [transactional workloads (OLTP)](#transaction-system-oltp)
      - [analytical workloads (OLAP)](#analytical-system-olap)
  - อธิบาย[หน้าที่และความรับผิดชอบ (roles&responsibilities)](#roles-and-responsibilities) ในการทำงานบน data workloads ทั่วไป
    - [database administrators](#database-administrators)
    - [data engineers](#data-engineer)
    - [data analysts](#data-analytic)
- **[Explore relational data in Azure](#relational-data-on-azure)** (20–25%) [Link](https://learn.microsoft.com/en-au/training/paths/azure-data-fundamentals-explore-relational-data/)
  - อธิบาย relational concepts
    - ระบุ[คุณสมบัติของ relational data](#characteristics-of-relational-data)***
    - อธิบาย [normalization และเหตุผลในการเลือกใช้งาน](#normalization)
    - ระบุ [structured query language (SQL) statements ทั่วไป](#structured-query-language-sql)
      - Data Definition Language (DDL) (CREATE,ALTER,DROP,RENAME)
      - Data Control Language (DCL) (GRANT,DENY,REVOKE)
      - Data Manipulation Language (DML) (SELECT,INSERT,UPDATE,DELETE)
    - ระบุ [relational database objects](#relational-database-objects) ทั่วไป ([View](#view),Stored Procedure, [Index](#clustered-index),Table)
  - อธิบาย [relational Azure data services](#relational-azure-data-services)
    - อธิบาย the Azure SQL family of products including [Azure SQL Database](#azure-sql-database), Azure SQL Managed Instance, and SQL Server on Azure Virtual Machines
    - ระบุ [Azure database services](#azure-database-service) for open-source database systems ([MySQL](#mysql),[MariaDB](#mariadb),[PostgreSQL](#postgresql))
- **[Explore non-relational data in Azure](#non-relational-data-on-azure)** (15–20%) [Link](https://learn.microsoft.com/en-au/training/paths/azure-data-fundamentals-explore-non-relational-data/)
  - อธิบายความสามารถของ Azure storage (Azure Blob storage,Azure File storage,Azure Table storage)
  - อธิบายความสามารถ(capabilities)และคุณสมบัติ(features)ของ Azure Cosmos DB
    - use-cases for Azure Cosmos DB
    - อธิบาย Azure Cosmos DB APIs
- **[Explore modern data warehouse analytics in Azure](#analytics-workload-on-azure)** (25–30%) [Link](https://learn.microsoft.com/en-au/training/paths/azure-data-fundamentals-explore-data-warehouse-analytics/)
  - อธิบายองค์ประกอบทั่วไปของ large-scale analytics
    - อธิบายข้อควรพิจารณา(considerations)ของ data ingestion และ processing
    - อธิบายตัวเลือกในการทำ analytical data stores
    - อธิบาย Azure services บน data warehousing
      - Azure Synapse Analytics
      - Azure Databricks
      - Azure HDInsight
      - Azure Data Factory
  - อธิบายข้อควรพิจารณา(considerations)ของ real-time data analytics
    - อธิบายความแตกต่างระหว่าง batch and streaming data
    - อธิบาย technologies ของการทำ real-time analytics  
      - Azure Stream Analytics
      - Azure Synapse Data Explorer
      - Spark Structured Streaming
  - อธิบาย data visualization in Microsoft Power BI
    - ระบุค[วามสามารถ(capabilities)ของ Power BI](#power-bi)
    - อธิบายคุณสมบัติ(features)ของการทำ [data models in Power BI](#core-concepts-of-data-modeling) ***
    - ระบุความเหมาะสมของ [visualizations สำหรับ data รูปแบบต่างๆ](#visualizations-types) (Bar chart,Column chart,Pie chart,Line chart, ETC.) ***

> ***: ยังไม่ได้สรุปเนื้อหา

---
---

## **Core data concepts**

### Type of data file

|Type|Concepts|Example|Azure Service|
|---|---|---|---|
|structured data|ข้อมูลอยู่ในลักษณะ Column และ Row|ERP,CRM|Azure SQL Database
||การแก้ไขโครงสร้างข้อมูลทำได้ยาก|
|semi-structured|โครงสร้างไม่ตายตัว บางข้อมูลอาจจะมี 4 Column อีกข้อมูลที่อยู่ร่วมกันอาจจะมี 5 Columnก็ได้|JSON|Azure Cosmos DB
||สามารถแก้ไขโครงสร้างแค่บางข้อมูลได้
|unstructured data|ไม่สามารถเชื่อมโยงด้วยข้อมูลภายในได้|Audio, Video, binary data files|Azure Blob Storage

### Type of data file formats

>- **Delimited text files** ![](https://freeiconshop.com/wp-content/uploads/edd/csv-outline.png){: width="50" } ![](https://learn.microsoft.com/th-th/power-query/media/combine-files-csv/combine-files-csv-sample-csv-file.png){: style="float: right; margin-right: 1em;"}{: width="220" }
>   - ตัวอย่าง Format
>     - CSV (Comma-Separated values)
>     - TSV (Tab-Separated values)
>   - ข้อดี
>     - อ่านและ แยกวิเคราะห์ ได้ง่าย
>   - ข้อเสีย
>     - แยกวิเคราะห์ได้ยาก ถ้าข้อมูลมีการใช้ comma
>     - ไม่มีการบังคับ type ของข้อมูล

>- **Extensible Markup Language (XML)** ![](https://cdn-icons-png.flaticon.com/512/136/136444.png){: width="50" } ![](https://docs.informatica.com/content/dam/source/GUID-9/GUID-9B047F14-F883-4E1F-930F-B6FA03EA7411/3/en/GUID-1005CEF2-D56A-4BEB-8CE9-0AC808A5D46E-low.png/_jcr_content/renditions/original){: style="float: right; margin-right: 1em;"}{: width="220" }
>   - ใช้ angle-brackets (<..>) ในการระบบ อิลิเม้น และ แอตทริบิวต์
>   - ทุกภาษา เครื่องมือ และซอฟต์แวร์ใดๆ ก็สามารถอ่านหรือเขียนไฟล์ XML ประเภทนี้ได้อย่างง่ายดาย
><br />
>
><br />
><br />  

> ![](https://1818760.fs1.hubspotusercontent-na1.net/hub/1818760/hubfs/Screen%20Shot%202021-12-08%20at%209.19.43%20AM.png?width=558&name=Screen%20Shot%202021-12-08%20at%209.19.43%20AM.png){: style="float: right"}{: width="250" }

>- **Javascript Object Notation (JSON)** ![](https://cdn-icons-png.flaticon.com/512/136/136443.png){: width="50" }
>   - เป็นที่นิยมของภาษาโปรแกรมมิ่ง
>   - คนสามารถอ่านได้ง่าย
>   - สามารถแก้ไขรูปแบบได้ง่ายกว่า XML
>   - ข้อเสีย เนื่องจากไม่มีการบังคับ สคีมา จึงทำให้มีการบันทึก Keys ซ้ำซ้อนกัน และไฟล์จึงมีขนาดใหญ่
><br />
>
><br />
><br />
><br />

>- **Binary Large Object (BLOB)** ![](https://cdn.iconscout.com/icon/premium/png-256-thumb/android-opaque-binary-blob-file-7855616-6374439.png?f=webp){: width="50" }
>   - เก็บในรูป  Binary (0 หรือ 1) และแปลงกลับด้วย Ascii
>   - ข้อมูลไม่มีโครงสร้าง บางส่วน ก็จะถูกเก็บในรูปแบบนี้

>- **Avro** ![](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTBXzsNl-SzrlGO44lB3VMG_UzB_DpQshOefQfxiCGM86ngW71NQJd4V9o5wwINuyWbGg&usqp=CAU){: width="100" }
>   - Create by Apache
>   - Row-Based format (use identity data to header of row)
>   - ไฟล์ขนาดเล็กมาก เร็วมาก และมีข้อมูลไบนารี่
>   - Header เก็บใน JSON
>   - สามารถบีบอัดข้อมูล ลดความต้องการพื้นที่จัดเก็บข้อมูลและแบนด์วิธเครือข่าย
>   - เราไม่สามารถอ่านไฟล์ด้วยการเปิดโดยตรง ต้องใช้เครื่งมือเฉพาะในการอ่าน
><br />
>
><br />

>- **ORC - Optimized Row Columnar format** ![](https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/Apache_Orc_logo.svg/1200px-Apache_Orc_logo.svg.png){: width="100" } ![ORC files](https://www.adaltas.com/static/4e7307372742855de1025961fe659c32/432e7/ORC_file_format.png){: style="float: right"}{: width="350" }
>   - ออกแบบมาเป็นพิเศษสำหรับ Hive และ PIG
>   - แบ่งข้อมูลออกเป็นกลุมละ 250 Mb และจัดเก็บแบบ Column-Based format
>   - file Footer จะเก็บข้อมูลเสริม เช่น
>     - list of stripe
>     - Number of row per stripe
>     - Each column's data type
>     - Column-level aggregates count, min, max, sum
>   - strip footer contains a directory of stream locations
>   - row data is used in table scans
>   - Index data รวมไปถึง min, max values of each column and the row positions within each column

>- **Parquet** ![](https://upload.wikimedia.org/wikipedia/commons/thumb/4/47/Apache_Parquet_logo.svg/2560px-Apache_Parquet_logo.svg.png){: width="100" }
>   - Column-Based format
>   - เก็บใน Row groups
>   - มีการเก็บ metadata ในทุก chunk
>   - ความเชี่ยวชาญในการจัดเก็บและประมวลผลประเภทข้อมูลที่ซ้อนกันอย่างมีประสิทธิภาพ
>   - สนับสนุนรูปแบบการบีบอัดและการเข้ารหัสที่มีประสิทธิภาพมาก
>   - สามารถใช้ได้กับออบเจ็กต์ใดๆใน Hadoop ecosystem เช่น  Hive, Hbase, MapReduce, Pig, Spark

- วิธิเลือกใช้ format
  - Type of data (structured,semi-structured,unstructured)
  - read or write
  - Storage or processing

- **Optimized file formats**
  - CSV, JSON, XML, BLOB
    - ข้อดี คนอ่านได้
    - ข้อเสีย ไม่มีประสิทธิภาพในการ processing และไฟล์ ขนาดใหญ่
  - Avro, ORC, Parquet
    - สามารถ Compression
    - สามารถ Indexing
    - Efficient Storage and Processing

- **AVRO vs Parquet vs ORC**

Features|AVRO|Parquet|ORC
:---|:---:|:---:|---:
Row/Column|Row|Column|Column
Compression|Good|Great|Excellent
Read Performance|Low|High|High
Write Performance|High|Low|Low
Ability to split file for parallel processing|Yes|Yes|Yes(best)
Schema Evoution support|Yes (best)|Yes|Yes

- **file formats Use-case**

Use-case|file formats recommend
---|---
Large file (TB,PB) | Avro
ETL Jobs | Avro
Ease of Maintenance | Parquet
Hive | ORC
Spark | Parquet

### Types of databases

#### Relational databases

Relational databases are commonly used to store and query structured data. The data is stored in tables that represent entities, such as customers, products, or sales orders. Each instance of an entity is assigned a primary key that uniquely identifies it; and these keys are used to reference the entity instance in other tables. For example, a customer's primary key can be referenced in a sales order record to indicate which customer placed the order. This use of keys to reference data entities enables a relational database to be normalized; which in part means the elimination of duplicate data values so that, for example, the details of an individual customer are stored only once; not for each sales order the customer places. The tables are managed and queried using Structured Query Language (SQL), which is based on an ANSI standard, so it's similar across multiple database systems.
![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-core-data-concepts/media/relational-database.png)

#### Non-relational databases

Non-relational databases are data management systems that don’t apply a relational schema to the data. Non-relational databases are often referred to as NoSQL database, even though some support a variant of the SQL language.

There are four common types of Non-relational database commonly in use.

Non-relational types |Example
---|---
**Key-value databases**: in which each record consists of a unique key and an associated value, which can be in any format.|![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-core-data-concepts/media/key-value-store.png){: style="float: right" width="200" }
**Document databases**: which are a specific form of key-value database in which the value is a JSON document (which the system is optimized to parse and query)|![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-core-data-concepts/media/document-store.png){: style="float: right" width="200"}
**Column family databases**: which store tabular data comprising rows and columns, but you can divide the columns into groups known as column-families. Each column family holds a set of columns that are logically related together.|![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-core-data-concepts/media/column-family-store.png)
**Graph databases**: which store entities as nodes with links to define relationships between them.|![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-core-data-concepts/media/graph.png)

### OLTP vs OLAP on data workloads

![](https://miro.medium.com/v2/resize:fit:1400/1*kDxyqz9MqDuFb5AyYu53AA.png)
![](https://phoenixnap.com/kb/wp-content/uploads/2021/06/OLTP-ETL-and-OLAP-layers.png)

#### Transaction System (OLTP)

Day-to-day handling of transactions that result from enterprise operation

- Small, discrete, unit of work
- Often high volume
- Data processed very quickly

#### Analytical System (OLAP)

Analysis of information in a database for the purpose of making management decisions

- Big picture view of the information held in a database.
- Generate insights to make business decisions

#### OLTP vs OLAP

OLTP (Transaction DB)|OLAP (Data Warehouse)
---|---
Many small transaction|Low volumn but complex queries
Current data|Historic,Non-volatile data
Used to run the business|Used to analyze the business
Highly detailed|Consolidated and summarized
Typically in the BG scale|TB and above scale
Processing performance limit|No limit,pause/resume compute

### Roles and Responsibilities

#### Database Administrators

- ดูแล database, เพิ่ม User หรือ Permissions ของ User,Backupหรือกู้ข้อมูลเมื่อมีปัญหา
- ออกแบบ(Design),ดำเนินการ(implementation),ดูแลรักษา(maintenance),ดำเนินงาน(Operational)ของ Database
- ดูแลภาพรวมทั้ง Performance และ Optimizations ของ database
- มีส่วนร่วมกำหนด Policies,tools และ Processes ในการสำรองข้อมูลและการกู้คืนเพื่อป้องกันความผิดพลาด
- ดูแลความปลอดภัยใน database เช่น การ granting privileges หรือ grantinเ access ให้ user

#### Data Engineer

- ดูแล infrastructure และ Processes สำหรับ Data integration ระหว่าง 2 System
- ทำ Data cleaning, ระบุ data governance rules,ดูแล data pipeline สำหรับ Transfer และ Transform ข้อมูล
- ออกแบบ ดูแล data-related workload และ data stores สำหรับ analytical workloads ,monitoring ให้แน่ใจว่ายังทำงาน

#### Data Analytic

- วิเคราะห์ข้อมูล และ หาinside ของข้อมูล เพราะชีนำธุรกิจ
- ออกแบบreport dashboard ให้สามารถนำเสนอข้อมูลได้ตรงประเด็น เข้าใจง่าย

---
---

## Relational data on Azure

![](/assets/DP900/characteristixs_of_relational_data.png){: style="float: right"}{: width="350" }

### Characteristics of Relational data

- Table: Data is stored in a table
- Table consist of rows and columns
- Row: each row represents a single
instance of an entity
- Column: define the properties of the
entity
- Each column is defined by a
datatype
- All rows have the same number of
columns

![](/assets/DP900/characteristixs_of_relational_data2.png){: style="float: left; margin-right: 2em;"}{: width="350" }

- Some columns are used to maintain relationships between tables
- Model shows the structure of the entities
- Primary Key: uniquely identify each row
- Foreign Key: reference, or link to the primary key of another table
  - used to maintain the relationships between tables.

##### Relational database use cases

- Relational databases are well suited for OLTP applications
- OLTP applications are focused on transaction oriented tasks that process a very large number of
transactions per minute.
- Examples of OLTP applications that use relational databases are
  - Banking solutions
  - Online retail applications,
  - Flight reservation systems, and
  - Most online purchasing applications.
- Relational Database **NOT** use for
  - Music, video, or other media files Blob storage
  - Social networking sites, highly complex web of relationships Graph Database

##### Benefits of Relational Database

- Consistency : Maintains data consistency across applications and database queries.
- Commitment and Atomicity: Handles business rules and policies at a very granular level with strict
policies
- Locking and Concurrency: Prevents other users and applications from accessing data while being
updated.

#### Normalization

![alt text](/assets/DP900/Normalization.png)

- Reduce storage
- Avoid data duplication
- Improve data quality
- Primary keys and Foreign keys are used to define relationship
- No data duplication exists other than key values
- Data is retrieved by joining tables together in a query
![alt text](/assets/DP900/Normalization2.png)

#### Structured Query Language (SQL)

- Most relational databases support Structured Query Language (SQL)
  - SQL Server TSQL
  - Oracle PL/SQL
- You use SQL to create tables, insert , update , and delete rows in tables, and to query data.

~~~SQL
-- Table 1 : Customers
SELECT CustomerID, CustomerName, CustomerAddress
FROM Customers

-- Table 2 : Orders
SELECT OrderID, ProductID
FROM Orders
WHERE CustomerID = 'C1'

-- Table 3 : Customers "Left Join" Orders
SELECT Customers.CustomerID, Customers.CustomerName, Customers.CustomerAddress,Orders.OrderID,Orders.ProductID
FROM Customers
LEFT JOIN Orders ON Customers.CustomerID = Orders.CustomerID
~~~

#### Relational Database Objects

##### Clustered Index

-Non Cluster Indexes consume additional storage space

- Each time you insert, update, or delete data in a table, the indexes for that table must be maintained
- Recommendations
  - Read only table more indexes will improve query performance
  - Transaction table more indexes on that table can slow your system down.
  - You must strike a balance between having indexes that speed up your queries versus the cost of
performing other operations.

##### View

- View is a virtual table based on the result set of a query
  - View does not store data but very much behave like a table
  - You can query view like a table
- A view can combine data from two or more table, using joins, and also just contain a subset of information. This
makes them convenient to abstract, or hide complicated queries.

### relational Azure data services

##### Provisioning and Deployment

How to create DB service on Azure

- Provisioning and deployment means to execute series of steps to create and configure a service
  - We need to provide parameters that provide estimate of size of workload we want to run
  - Behind the scene Azure will create other required resources: Disks, memory, CPUs, network and so on
  - You will be charged for these resources until you delete them
  - We can Scale dynamically

##### Methods of Provisioning and Deployment

- The Azure portal (Azure UI)
  - Convenient but manual
- The Azure command line interface (CLI)
  - Set of commands to create and manage Azure resources specifically
  - Can run from the operating system command prompt or the Cloud Shell in the Azure portal.
  - Suitable if you need to automate service creation
- Azure PowerShell
  - This is a cross platform task automation and configuration management framework.
  - Command line shell and scripting language that is built on top of .Net
- Azure provides a series of commandlets (Azure specific commands) that you can use in PowerShell to create and
manage Azure resources.
- Azure Resource Manager templates
  - JSON (JavaScript Object Notation) file template that describes the service, and can be used to create resources.

![Azure Resource Manager templates](/assets/DP900/Azure_Resource_Manager_templates.png)

#### Azure SQL database

database-as-a-service on azure cloud

- Full Managed
- Predictable performance and pricing
- Elastic pool for unpredictable workloads
- 99.99% availability build-in
- Gro-replication and restore services
- support existing SQL server tools, libraries and APIs
- Scalability with on downtimme
- secure and compliant for your sensitive data
![alt text](/assets/DP900/Azure_SQL_database1.png)

#### Azure IaaS vs PaaS database offerings

1. SQL server on Azure VMs (IaaS) ![](https://demiliani.files.wordpress.com/2018/04/sql-server-on-azure-virtual-machine.jpg){: style="float: right" width="200" }
   1. ไม่ต้องดูแล เครื่อง
   2. ต้องดูแล OS
   3. ดูแล dataase engine เอง
   4. migrate จากระบบอื่น โดยเลือก version เดิมได้
   5. ใช้ license เดิมของ SQL Server ได้
   6. จ่ายตามการใช้งาน VMs + license
   7. High availability การทำให้ระบบพร้อมใช้งาน หากมีเหตุการณ์ไม่ปรกติเกิดขึ้นกับระบบของเรา หรือ เรียกศัพท์หรูว่า Unplan downtime คือไม่ได้วางแผนไว้ก่อนว่าจะ Down แต่ทะลึ่ง Down เช่น Server พัง เป็นต้น
   8. Disaster recovery ระบบสำรองและกู้คืนข้อมูลในกรณีที่ระบบหลักเกิดความเสียหาย เพื่อให้ใช้ข้อมูลที่สำรองไว้มาทำงานต่อได้ทันที.
   9. Change control ความคุมการเปลี่ยนแปลงได้ เช๋น เราจะเปลี่ยน version หลังจากเทสระบบของเราแล้วไม่มีปัญหาเท่านั้น
   10. private IP address within Azure VNet
2. Azure SQL database (PaaS หรือ DBaaS)
   1. ไม่ต้องดูแล เครื่อง, OS และ dataase engine
   2. มี features เพิ่มเติม
   3. จ่ายตามการใช้งานจริง
   4. สามารถ deploy ได้หลายรูปแบบ และระดับ (tiers)
   5. high availability and disaster recovery ความพร้อมใช้งานสูงและการกู้คืนความเสียหาย เรามีหน้าที่ test app ให้เข้ากับระบบได้ ก็พอ
   6. ability to assign necessary resources,ความสามารถในการกำหนดทรัพยากรที่จำเป็น

#### Azure Database Deployment Options

![alt text](/assets/DP900/Azure_Database_Deployment_Options.png)

- PaaS
  - Single Database
    - การันตีว่าจะได้ทรัพยาการประจำเครื่อง พร้อมใช้งานตลอดเวลา
  - Elastic Pool
    - แชร์ทรัพยากรกับ database ทั้งหมดใน pool
  - Managed Instance
    - ดูแล Instance ด้วยตัวเอง
    - เปิด-ปิด Instance ได้
    - การันตีว่าจะได้ทรัพยาการประจำเครื่อง
  
![alt text](/assets/DP900/SingleDatabaseCreate.png)

- IaaS
  - Full Version of SQL Server in cloud
  - Geographic regions
  - Variety of Configuration to Choose
  - Automatic Updates
  - Automatic Backup

#### Azure SQL Database vs Azure SQL Data Warehouse

- Azure SQL Database ![](https://www.clipartmax.com/png/middle/243-2432711_azure-sql-database-icon.png){: style="float: right" width="200" }
  - OLTP/CRUD, Transaction Data
  - SMP (Symmetric Multiprocessing) (parallel processing)
  - Vertical Scale
  - No PolyBase***
- Azure SQL Data Warehouse
  - OLAP/Querying and Reporting, Analytical Data ![](https://e7.pngegg.com/pngimages/923/105/png-clipart-microsoft-azure-sql-database-data-warehouse-perspective-angle-text.png){: style="float: right" width="200" }
  - MPP (Massively Parallel Processing)
  - Horizontal Scale
  - Can pause the virtual server to save cost
  - PolyBase***

>PolyBase คือการประมวนผล"รวมข้อมูล"ระหว่างข้อมูลด้านในกับด้านนอกDatabaseโดยตรงด้วย T-SQL แทนการนำเข้าข้อมูลแบบเดิมแล้ว Join เพื่อรวมข้อมูล

#### Azure Database service

##### MYSQL

![](https://thaiconfig.com/wp-content/uploads/2023/02/MySQL-Database-%E0%B8%84%E0%B8%B7%E0%B8%AD%E0%B8%AD%E0%B8%B0%E0%B9%84%E0%B8%A3.png){: style="float: right"}{: width="200" }

- Simple to use open source database management
- Can be used for Linux, Apache, MySQL, and PHP (LAMP) stack apps
- Several editions; Community, Standard, and Enterprise.

- Benefits of Azure Database for MySQL
  - High availability
  - Scalable
  - Secure data, both at rest and in motion.
  - Automatic backups and point in time restore for the last 35 days.
  - Enterprise level security and compliance with legislation.
  - Azure Database for MySQL servers provides monitoring functionality to add alerts, and to view metrics and logs.

##### MariaDB

![](https://briancaffey.github.io/static/mariadb.png){: style="float: right"}{: width="200" }

- New DBMS, created by the original developers of MySQL
- Compatibility with Oracle Database
- Optimized to improve performance
- built in support for temporal data

- Benefits of Azure Database for MariaDB
  - Fully managed and controlled by Azure
  - Built in high availability with no additional cost.
  - Predictable performance, using inclusive pay as you go pricing.
  - Scaling as needed within seconds.
  - Secured protection of sensitive data at rest and in motion.
  - Automatic backups and point in time restore for up to 35 days.

##### PostgreSQL

![](https://miro.medium.com/v2/resize:fit:610/1*mMq3Bem9r8ASAn1YwcTbEw.png){: style="float: right"}{: width="200" }

- Hybrid relational object database
- Enables you to store custom data types, with their own non relational properties
- Code modules can be added
- Manipulate geometric data, such as lines, circles, and polygons
- pgsql

- Benefits of Azure Database for PostgreSQL
  - Provides the same availability, performance, scaling, security, and administrative benefits
  - Some features of on premises PostgreSQL databases are not available in Azure Database for PostgreSQL
  - Continue to use pgAdmin tool
  
##### Migrate data to Azure

- Azure Database Migration Service (DMS)
  - Enables you to restore a backup of your on premises databases directly to databases running in Azure
Data Services
- Replication from an on premises database

#### Identify Query Tools

- Azure Portal (Azure UI)
![alt text](/assets/DP900/AzurePortal.png)
  - Query editor built in to the portal
  - Execute queries against your database in Azure SQL Database or data
  warehouse in Azure Synapse Analytics.
  - Doesn't support connecting to the master database
  - 5 minute timeout for query execution
  - No support for IntelliSense for database tables and views
- SQL Server Management Studio (SSMS)
  - Integrated environment for managing any SQL infrastructure
  - Use SSMS to access, configure, manage, administer, and develop all components of SQL
  Server, Azure SQL Database, and Azure Synapse Analytics
  - Support database administration tasks
    - User management, vulnerability assessment, security features
    - Performance tuning advisors
    - Import and Export of DACPAC files
- Azure Data Studio
  - Cross platfom database tool
  - Can be used for both on premises and cloud data platforms
  - Works with Windows, Mac OS and Linux
  - Intellisense , code snippets, source control integration and integrated terminal
  - Charting of query results, customizable dashboards
  - Open source, free
- Sqlcmd utility
  - Command line utility
  - Execute T SQL statements, stored procs, and script files
  - Uses ODBC to execute Transact SQL batches
  - Windows and Linux options (RHEL, Ubuntu, SUSE)
  - MacOS in preview
  - Can run in a docker container
- Visual Studio Code
  - Visual Studio environment
  - Thousands of extensions
  - Debug
  - Language support
  - Source Control
  - Cross platform
  - Simple to use
  - FREE

Azure Data Studio vs SSMS

- Use Azure Data Studio if you:
  - Are mostly editing or executing queries.
  - Need the ability to quickly chart and visualize result
  sets.
  - Can execute most administrative tasks via the
  integrated terminal using sqlcmd or PowerShell.
  - Have minimal need for wizard experiences.
  - Do not need to do deep administrative or platform
  related configuration.
  - Need to run on macOS or Linux

- Use SQL Server Management Studio if you:
  - Are doing complex administrative or platform
  configuration.
  - Are doing security management, including user
  management, vulnerability assessment, and
  configuration of security features.
  - Need to make use of performance tuning advisors and
  dashboards.
  - Use database diagrams and table designers.
  - Need access to Registered Servers.
  - Make use of live query stats or client statistics.

#### Introduction to SQL

- Structured Query Language (SQL)
  - Used to communicate with a relational database.
  - First developed as SEQUEL in the early 1970s
  - SQL Standard first formalized in 1986 as SQL 86, now up to SQL:2019
- Database Providers
  - Each database engine has its own version of SQL that extends the standard for its own purpose, usually to add
  programming elements (stored procs!)
  - Most vendor version of SQL are not 100% compatible with the standard
  - SQL Server Transact SQL (T SQL)
  - Oracle PL/SQL [Procedural Language/SQL]
  - MySQL SQL/PSM
  - PostgreSQL PL/ pgSQL
  - They are not often compatible an Oracle PL/SQL command would not work unaltered on SQL Server

#### DDL vs DML vs DCL

- Data Definition Language (DDL)
  - CREATE, ALTER, DROP, TRUNCATE, RENAME
- Data Manipulation Language (DML)
  - DML statements to manipulate the rows in a relational table
  - SELECT, INSERT, UPDATE, DELETE
- Data Control Language (DCL)
  - GRANT and REVOKE

#### Identify the right data offering

- Azure SQL Server
  - Needs to perform high speed online transaction processing (OLTP) operations
  - Highly normalized with enforced schemas
  - Requires high integrity and strong consistency
  - Relationships are maintained between data tables
  - Example Inventory management and Finance and accounting system
- Azure Synapse Analytics (Azure Data Warehouse)
  - Enterprise data analytics system workload
  - Provides a set of tools to organize and analyze enterprise data
  - MPP Architecture
- Azure Cosmos DB
  - Mainly targeted for non relational data stores
- Azure Blob Storage / Azure Data Lake
  - Store binary data Images, videos

#### Identify the right data offering for a relational workload

- Azure SQL Server Single Database
  - Up to date relational database service
  - Not fully compatible with on prem
- Azure SQL Server Managed instance
  - Most of PaaS benefits + high compatibility
  - Lift and Shift your on prem databases
- Azure SQL Server Virtual Machine
  - Install specific version of SQL Server on virtual machine
  - Allow operating system level access
- PostgreSQL, MySQL, MariaDB
  - Deploy existing on prem database to Azure

---
---

## Non-relational data on Azure

### Introduction to NoSQL

because of RDBMS ware lacking Scalability and Flexibility
but NoSQL have

- Horizontal Scaling possible
- No Schema enforced

![](https://www.cloudzero.com/wp-content/uploads/2023/10/horizontal-vs-vertical-scaling.webp)

- Vertical scaling
  - Add more CPU, RAM, HDD in same
  system
- Horizontal Scaling
  - Add more commodity machines in
  system

- NoSQL Use Cases
  - Big data and real-time web applications.
  - Relationship b/w data is not important
  - Data change frequently
- NoSQL Limitations
  - Schema less data means inconsistent data
  - Denormalized data means redundant data
  - Redundant data means inaccuracies and conflicts
  - Does not support many good features of Relational DB
    - SPs, Functions, Views, Row level security, Locks, etc.

#### SQL vs NoSQL

SQL|NoSQL
---|---
Relational database|Non relational or distributed
Fixed schema|Dynamic
Designed for complex queries|Not for complex queries
SQL, MySql, Oracle, Postgres|MongoDB, Redis, Hbase
Vertical scaling|Horizontal scaling
Row Oriented|Multi model oriented
Tables|Collections
Limited for big data|Great for big data

#### 4 Types of NoSQL databases

![alt text](/assets/DP900/Types_of_NoSQL.png)

- Key value store ![alt text](/assets/DP900/Key_value_store.png){: style="float: right"}{: width="150" }
  - Uses a simple key/value to store data
  - Quick to query due to its simplicity
  - Value can be JSON, BLOB, String etc.
  - Use Cases:
    - User profiles and session info on a website, blog comments, telecom directories, IP forwarding tables, shopping cart contents on ecommerce sites, and more.
  - Examples
    - Cosmos DB Table API, Redis , Table Storage, Oracle NoSQL Database, Voldemorte , Aerospike, Oracle Berkeley DB
- Document store
  - Document oriented model to store data![alt text](/assets/DP900/Document_store.png){: style="float: right"}{: width="300" }
  - Similar to key/value store, difference is that, the value in a document store database consists of semi structured data.
  - Each record and its associated data within a single document.
  - Document stores are usually XML, JSON, BSON, YAML, etc.
  - Use Cases:
    - Content management systems, blogging platforms, and other web applications, blog comments, chat sessions, tweets, ratings, etc.
  - Examples
    - Cosmos DB, MongoDB, DocumentDB , CouchDB , MarkLogic , OrientDB

- Column store
![alt text](/assets/DP900/Column_store.png){: style="float: right"}{: width="200" }
  - Stores data using a column oriented model
  - Columns in each row are contained within that row
  - Each row can have different columns to the other rows.
  - Extremely quick to load and query
  - Use Cases:
    - Sensor Logs [Internet of Things (IOT)], User preferences, Geographic information, Reporting systems, Time Series Data, Logging and other write heavy applications
  - Examples
    - Cosmos DB, Bigtable, Cassandra, Hbase, Vertica, Druid, Accumulo,Hypertable
- Graph store ![alt text](/assets/DP900/Graph_store.png){: style="float: right"}{: width="200" }
  - Focuses on how data relates to other data points.
  - A node is a specific entity or piece of information
  - Edge simply specifies the relationship between two nodes.
  - Use Cases:
    - Social networks, realtime product recommendations, network diagrams,fraud detection, access management, and more.
  - Examples
    - Cosmos DB Gremlin API, Neo4j, Blazegraph , and OrientDB

- JSON file
  - JSON short for JavaScript Object Notation
  - format for sharing data like XML
  - JSON offers a good alternative to XML Very readable and lightweight
  - A JSON object is a key value data format that is typically rendered in curly
  braces
  - At the granular level, values can be one of 6 simple data types:
    - strings
    - numbers
    - Booleans (true or false)
    - null
    - objects

![alt text](/assets/DP900/JSONStructure.png)

#### NoSQL Offerings by Microsoft Azure

![alt text](/assets/DP900/NoSQL_Offerings.png)

- Azure Storage ราคาถูกมาก
  - Blob
    - เก็บอะไรก็ได้ ไฟล์ ภาพ เพลง เอกสาร ข้อมูลไบนารี่ วีดีโอ
    - ราคาถูก
    - ไม่เร็วมากและโดยทั่วไปไม่สามารถใช้กับข้อมูลขนาดใหญ่ได้โดยตรง
  - Table
    - จัดเก็บข้อมูล Table ในรูปแบบที่ไม่ใช้สคีมาได้
  - File*
    - เหมือน Blob
    - เก็บไฟล์รองรับโปรโตคอล SMB ทำให้แชร์ไฟล์ได้เหมือน google drive
  - Queue*
    - จัดเก็บและดึงข้อความ แบบ คิว
- Data Lake
- Cosmos DB
  - รองรับ 5 API
    - SQL(Core) API
    - Table API
    - MongoDB API
    - Cassandra API
    - graph API

>Technically, file storage and storage are not exactly nautical database

- Azure Storage Data Redundancy
![alt text](/assets/DP900/Storage_Redundancy.png)
  - Locally redundancy Storage (LRS) - 3 synchronous copies in same data center![alt text](/assets/DP900/LRS.png)
  - Zone-redundancy Storage (ZRS) - 3 synchronous copies in 3 Availability zones (AZs)![alt text](/assets/DP900/ZRS.png)
  - Geo-redundancy Storage (GRS) - LRS + Asynchronous copy to secondary region (3 more copies using LRS) - Read Only access ![alt text](/assets/DP900/GRS.png)
    - Read-access Geo-redundancy Storage (RA-GRS) - Read Access on GRS![alt text](/assets/DP900/RA_GRS.png)
  - Geo-zone-redundancy Storage (GZRS) - ZRS + Asynchronous copy to secondary region (3 more copies using LRS) - Read Only access![alt text](/assets/DP900/GZRS.png)
    - Read-access Geo-zone-redundancy Storage (RA-GZRS) - Read Access on GZRS ![alt text](/assets/DP900/RA_GZRS.png)

![](https://miro.medium.com/v2/1*V5syja2casc0gCuu9zKV5g.png)

![alt text](/assets/DP900/Blob_Storage.png)
![alt text](/assets/DP900/Blob_Storage2.png)

- Storage access Tiers
  - pricing ![alt text](/assets/DP900/Storage_access_Tiers.png){: style="float: right"}{: width="100" }
    - the volume of data stored/month
    - Types of operations performaed
    - Number of operations performaed
    - data transfer cost,if any
    - the selected data redundancy option
  - organize your data base on attributes like frequency of access and planned retention period
  - blob access tire
    - hot access tier
      - frequently accesseddata
        - Example - images for your website
      - Low latency
      - Higher access cost
    - cool access tier
      - infrequent accessed data
        - Example - incoices for your customers previous month to 6 month
      - high latency
      - Lower cost
      - Stored for at least 30 days
    - archive access tier
      - rarely axxessed data
        - example - long-term backup
      - highest access times and access cost
      - latency in hours
      - stored for at least 180 days
      - Use case : business policy mandated data archiving, long-term retention like healthcare data

![alt text](/assets/DP900/Azure_Table_Storage.png)
![alt text](/assets/DP900/Azure_Table_Storage2.png)

![alt text](/assets/DP900/Azure_file_Storage.png)
![alt text](/assets/DP900/Azure_file_Storage2.png)

#### Why Cosmos DB?

Challenges with globally distributed Databases

- Long time
- Lot of effort
- Need own infrastructure
  - Teams
  - Data centers etc.

#### Why Cosmos DB?

- CONSISTENCY CHOICES
  - Azure Cosmos DB's support for consistency levels
  like strong, eventual, consistent prefix, session,
  and bounded staleness.
- SCALABLE
  - Unlimited scale for both storage and throughput.
  SCALABLE
- HIGHLY AVAILABLE, RELIABLE & SECURE
  - Always on
  - 99.999% SLA
  - •< 10ms latency
- MULTIMODEL & MULTI-LANGUAGE
  - Supports Jason documents, table graph and columnar data models
  - Java, .NET, Python, Node.js, JavaScript, etc.
- GLOBALLY DISTRIBUTED
  - Turnkey global distribution
  - สามารถ เขียนจาก regions เดียว แล้วให้ regions ที่เหลือ อ่านอย่างเดียวได้
  - จะมี คู่ global ที่มีทางลัดข้อมูล ทำให้ส่งเร็วขึ้น
- FULLY MANAGED
  - Database as a service ( DaaS)
  - Serverless architecture
  - No operational overhead
  - No schema or Index management
![alt text](/assets/DP900/Cosmos_DB_UseCase_IOT.png)
![alt text](/assets/DP900/Cosmos_DB_UseCase_Gaming.png)
![alt text](/assets/DP900/Cosmos_DB_UseCase_Retail.png)
![alt text](/assets/DP900/Cosmos_DB_UseCase_WebAndMobile.png)

![alt text](/assets/DP900/choose_NoSQL.png)
![alt text](/assets/DP900/Cosmos_DBvs_MongoDB_API.png)

- Cosmos DB Table API
  - Key Value store
  - Premium offering for Azure Table Storage
  - Existing Table Storage customers will migrate to
  Cosmos DB Table API
  - Row value can be simple like number or string
  - Row cannot store object
- Cosmos DB Cassandra API ![alt text](/assets/DP900/cassandra.png)
  - Wide column No SQL Database
  - Name and format of column can vary from row to row.
  - Simple migrate your Cassandra application to Cosmos Cassandra API and change connection string.
  - Interact
    - Cassandra based tools
    - Data Explorer
    - Programmatically, using SDK ( CassandraCSharpdriver)
- Cosmos DB Gremlin API![alt text](/assets/DP900/gremlin.png)
  - Graph Data Model
  - Real world data connected with each other
  - Graph database can persist relationships in the storage layer
  - Use cases
    - Social networks
    - Recommendation engines
    - Geospatial
    - Internet of things
  - Migrate existing apps to Cosmos DB Gremlin API
  - Graph traverse a language

Graph Model

|![alt text](/assets/DP900/Graph_Model.png)|
|:--:|
| *Graph Model* |

Analyze the decision criteria

|![alt text](/assets/DP900/Analyze_the_decision_criteria.png "test")|
|:--:|
| *Criteria* |

---
---

## Analytics workload on Azure

### Data ingestion and processing

![](/assets/DP900/data_ingestion_and_processing.png)

#### Data Ingestion

![](/assets/DP900/data_ingestion_and_processing1.png){: style="float: right"}{: width="200" }

- Data ingestion is the process of obtaining and importing data
- Data can arrive as a continuous stream or batches
- Raw data can be stored at DBMS, a set of files, or some other type of fast,
easily accessible storage.
- Ingestion might perform:
  - Filtering: Example reject suspicious, corrupt, or duplicated data
  - Simple transformation: converting data into a standard form
  - example: reformat all date and time

#### Data Processing

![](/assets/DP900/data_ingestion_and_processing2.png){: style="float: right"}{: width="200" }

- Data processing takes the data in its raw form, cleans it, and converts it into a
more meaningful format (tables, graphs, documents, and so on)
- The result is a database that you can use to perform queries and generate
visualizations
- Data Cleaning: removing anomalies, and applying filters and transformations
- Data Wrangling: capture, filter, clean, combine, and aggregate data

### ETL vs ELT

#### ETL Extract, Transform, and Load

![](/assets/DP900/ETL.png){: style="float: right"}{: width="200" }

- Raw data is retrieved and transformed before being saved
- Suitable for systems that only require simple models
- Basic data cleaning tasks, deduplicating data, and
reformatting the contents of individual fields.
- Stream oriented approach emphasis on throughput
- ETL can help with data privacy and compliance, removing sensitive data before it arrives in your analytical data models.
- Performed as a continuous pipeline of operations
- SSIS can be used

#### ELT Extract, Load, and Transform

![](/assets/DP900/ELT.png){: style="float: right"}{: width="200" }

- Data is stored before being transformed
- More suitable for constructing complex models
- Iterative approach, often using periodic batch
processing.
- Suitable for the cloud
- Azure Data Factory create and schedule data
driven workflows, using compute services such
as Azure HDInsight Hadoop Azure Databricks

### Data Warehouse

![alt text](/assets/DP900/Data_Warehouse_intro.png)

- Problems a Data Warehouse Can Solve
  - We have so much data, but we can’t make anything of it
  - I only want to know what is important
  - We need to slice and dice the data
  - Business people need to access data easily
  - Numbers between departments don’t match and we don’t know who’s right
  - We want people to make decisions based on facts

Facts vs Dimension
FACT|Dimension
---|---
Store observations or events|Describe business entities
things you model
Subject of Analysis|Context of Analysis
Numerical|Textual (most often)
Additive and Semi additive|Contain most attributes
Example:
sales orders, stock balances, exchange rates,temperatures, etc.|Example: products, people, places, and concepts
||including time itself.

#### Star Schema

A Data Mart design pattern consisting of fact and dimension tables resembling a star like shape.
![alt text](/assets/DP900/Star_Schema.png)
![alt text](/assets/DP900/Star_Schema2.png)

#### Snowflake dimensions

![alt text](/assets/DP900/SnowflakeDimensions.png)

#### Why Warehousing in Cloud?

- Benefits of Cloud DW
  - No large capital expense
  - No hardware maintenance
  - Scalability
  - Cost
  - Integration with other services
  - MPP
  - Time to market

![alt text](/assets/DP900/old_DW.png)
![alt text](/assets/DP900/modern_DW.png)
![alt text](/assets/DP900/modern_DW1.png)

### Azure Synapse Analytics

![alt text](/assets/DP900/AzureSynapseAnalytics.png)

### HDInsight

![alt text](/assets/DP900/HDInsight.png)

### Big Data Architecture

![alt text](/assets/DP900/Batch_Processing.png)

#### Batch Processing

- Data at rest
- Operate on very large dataset
- Computation takes significant time
- Use Cases:
  - Example Web Server logs to Report
- Challenges:
  - Data Format and encoding
  - Orchestration time slices

#### Real Time Processing Architecture

![alt text](/assets/DP900/Big_Data_Architecture.png)

- Real time processing:
  - Deals with streams of data that are captured in real time
  - Processed with minimal latency
  - Incoming data typically arrives in an unstructured or semi structured format, such as JSON
  - Generate real time (or near real time) reports or automated responses.
- For example:
  - Use sensor data to detect high traffic volumes
- Challenges:
  - Ingest, process, and store messages in real time, especially at high volumes

#### Azure Stream Analytics

![alt text](/assets/DP900/Azure_Stream_Analytics_flow.png)

#### Batch vs Streaming

![alt text](/assets/DP900/Batch_vs_Streaming.png)
![alt text](/assets/DP900/Batch_vs_Streaming2.png)
![alt text](/assets/DP900/Batch_vs_Streaming3.png)

#### Data Lake

![alt text](/assets/DP900/Data_Lake.png)

#### Data Lake Gen2 Hierarchical namespace

![alt text](/assets/DP900/Data_Lake_Gen2_Hierarchical_namespace.png)
ถ้าเป็น Blob จะสร้างDir ได้แค่ 1 level เป็น Flat Storage
ถ้าเป็น Data Lake Gen2 เก็บได้เหมือน Blob แต่สร้าง Dir ได้มากกว่า 1 level จึงเรียกว่า "Hierarchical namespace"

#### Azure Data Factory

![alt text](/assets/DP900/Data_Factory.png)

- Copy Data
  - More than 80 connectors to different services are available
- Transform Data
  - Using newly added Data Flow, now Data Factory is complete cloud based ETL tool.

- Hybrid Data Integration Service
- Simplifies ETL at scale
- Enables modern data integration
- Drag and drop interface
- Over 80 connectors available
- Move, transform and save data
- Managed Service
- Create Data Driver workflows
- Orchestrate and automate data
movement
- Transform and store data
- Operationalize the process
- ETL or ELT scenarious

#### Azure Data Factory Components

![alt text](/assets/DP900/Azure_Data_Factory_Components1.png)
![alt text](/assets/DP900/Azure_Data_Factory_Components2.png)

Azure Data Factory|SSIS
---|---
Pipeline|Package
Linked Service|Connection manager
Source|Source
Sink|Destination
Activity|Control flow task
Data Flow|Data flow

![alt text](/assets/DP900/Data_Factory_Flow.png)

#### Data Factory Triggers

- Scheduler

### Azure Databricks ![alt text](/assets/DP900/Azure_Databricks.png)

- Managed 1st Party Azure Service
  - Native integration with Azure & Its services;
  - Azure SLA and support
- Transparency
  - Deploys Databricks workspace and
  - clusters in customer subscription
- Security
  - Natively integrates with Azure
  - Active Directory & Providers RBAC
- United Billing
  - Pay for what you use only via
  - Azure subscription
![alt text](/assets/DP900/Azure_Databricks_Architecture.png)

![alt text](/assets/DP900/Modern_Data_Platform_Reference_Architecture.png)

### Power BI

- Building Blocks of Power BI
  - Visualizations ![alt text](/assets/DP900/Visualizations.png)
  - Datasets![alt text](/assets/DP900/Datasets.png)
    - Collection of data that power BI uses to create
    it’s visualization.
    - Can also be combination of many sources
    - Should filter data before bringing in to Power BI
    - Data Connectors
  - Reports![alt text](/assets/DP900/Reports.png)
  - Dashboards ![alt text](/assets/DP900/Dashboards.png)
    - Dashboards are a wonderful way to monitor your business,
  to look for answers, and to see all of your most important
  metrics at a glance
    - The visualizations on a dashboard come from reports and
    each report is based on one dataset
    - Entryway into the underlying reports and datasets
    - Dashboards can be viewed and shared on mobile devices![alt text](/assets/DP900/Dashboards2.png)
    - Can share dashboards with other users or groups, who can
    then interact with your dashboards when they're in the Power
    BI service or on their mobile device.
  - Tiles![alt text](/assets/DP900/Tiles.png)

![alt text](/assets/DP900/PowerBI_Workflow.png)

#### Core Concepts of Data Modeling

Analytical models enable you to structure data to support analysis. Models are based on related tables of data and define the numeric values that you want to analyze or report (known as measures) and the entities by which you want to aggregate them (known as dimensions). For example, a model might include a table containing numeric measures for sales (such as revenue or quantity) and dimensions for products, customers, and time. This would enable you aggregate sale measures across one or more dimensions (for example, to identify total revenue by customer, or total items sold by product per month). Conceptually, the model forms a multidimensional structure, which is commonly referred to as a cube, in which any point where the dimensions intersect represents an aggregated measure for those dimensions.)
![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-fundamentals-data-visualization/media/cube.png)

##### Tables and schema

Dimension tables represent the entities by which you want to aggregate numeric measures – for example product or customer. Each entity is represented by a row with a unique key value. The remaining columns represent attributes of an entity – for example, products have names and categories, and customers have addresses and cities. It’s common in most analytical models to include a Time dimension so that you can aggregate numeric measures associated with events over time.

The numeric measures that will be aggregated by the various dimensions in the model are stored in Fact tables. Each row in a fact table represents a recorded event that has numeric measures associated with it. For example, the Sales table in the schema below represents sales transactions for individual items, and includes numeric values for quantity sold and revenue.
![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-fundamentals-data-visualization/media/star-schema.png)
This type of schema, where a fact table is related to one or more dimension tables, is referred to as a star schema (imagine there are five dimensions related to a single fact table – the schema would form a five-pointed star!). You can also define a more complex schema in which dimension tables are related to additional tables containing more details (for example, you could represent attributes of product categories in a separate Category table that is related to the Product table – in which case the design is referred to as a snowflake schema. The schema of fact and dimension tables is used to create an analytical model, in which measure aggregations across all dimensions are pre-calculated; making performance of analysis and reporting activities much faster than calculating the aggregations each time.)

##### Attribute hierarchies

One final thing worth considering about analytical models is the creation of attribute hierarchies that enable you to quickly drill-up or drill-down to find aggregated values at different levels in a hierarchical dimension. For example, consider the attributes in the dimension tables we’ve discussed so far. In the Product table, you can form a hierarchy in which each category might include multiple named products. Similarly, in the Customer table, a hierarchy could be formed to represent multiple named customers in each city. Finally, in the Time table, you can form a hierarchy of year, month, and day. The model can be built with pre-aggregated values for each level of a hierarchy, enabling you to quickly change the scope of your analysis – for example, by viewing total sales by year, and then drilling down to see a more detailed breakdown of total sales by month.
![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-fundamentals-data-visualization/media/hierarchy.png)

##### Analytical modeling in Microsoft Power BI

You can use Power BI to define an analytical model from tables of data, which can be imported from one or more data source. You can then use the data modeling interface on the Model tab of Power BI Desktop to define your analytical model by creating relationships between fact and dimension tables, defining hierarchies, setting data types and display formats for fields in the tables, and managing other properties of your data that help define a rich model for analysis.
![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-fundamentals-data-visualization/media/power-bi-model.png)

#### visualizations types

After you've created a model, you can use it to generate data visualizations that can be included in a report.

There are many kinds of data visualization, some commonly used and some more specialized. Power BI includes an extensive set of built-in visualizations, which can be extended with custom and third-party visualizations. The rest of this unit discusses some common data visualizations but is by no means a complete list.

- The most common forms of visualizations are:
  - Tables and text ![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-fundamentals-data-visualization/media/text-table.png)
    - Tables and text are often the simplest way to communicate data. Tables are useful when numerous related values must be displayed, and individual text values in cards can be a useful way to show important figures or metrics.
  - Bar and column charts ![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-fundamentals-data-visualization/media/bar-column-chart.png)
    - Bar and column charts are a good way to visually compare numeric values for discrete categories.
  - Line charts ![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-fundamentals-data-visualization/media/line-chart.png)
    - Line charts can also be used to compare categorized values and are useful when you need to examine trends, often over time.
  - Pie Charts ![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-fundamentals-data-visualization/media/pie-chart.png)
    - Pie charts are often used in business reports to visually compare categorized values as proportions of a total.
  - Matrix
  - Key influencers
  - Treemap
  - Scatter ![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-fundamentals-data-visualization/media/scatter-plot.png)
    - Scatter plots are useful when you want to compare two numeric measures and identify a relationship or correlation between them.
  - Filled map ![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-fundamentals-data-visualization/media/map.png)
    - Maps are a great way to visually compare values for different geographic areas or locations.
- Interactive reports in Power BI ![](https://learn.microsoft.com/en-au/training/wwl-data-ai/explore-fundamentals-data-visualization/media/power-bi-report.png)
  - In Power BI, the visual elements for related data in a report are automatically linked to one another and provide interactivity. For example, selecting an individual category in one visualization will automatically filter and highlight that category in other related visualizations in the report. In the image above, the city Seattle has been selected in the Sales by City and Category column chart, and the other visualizations are filtered to reflect values for Seattle only.

---
---

## Retired Topic

### Microsoft Fabric

1. Introduction to Azure Service Fabric:
Azure Service Fabric is a distributed systems platform designed to simplify the development, deployment, and management of microservices-based applications. Microservices architecture breaks down large applications into smaller, independently deployable services, offering flexibility, scalability, and reliability.
2. Microservices Architecture:
Microservices architecture involves developing an application as a collection of small, loosely coupled services. Benefits include:
   - Scalability: Each service can scale independently based on demand.
   - Flexibility: Services can be developed, deployed, and updated independently.
   - Reliability: Isolation of services ensures that a failure in one service does not affect others.
3. Service Types in Azure Service Fabric:
   - Stateless Services: Stateless services don't maintain any persistent state across instances. They are suitable for tasks that don't require data storage.
   - Stateful Services: Stateful services maintain state across multiple instances, providing reliability and scalability. They're suitable for applications that require data consistency.
4. Containers and Docker Integration:
   - Azure Service Fabric supports containerization using Docker, offering benefits such as:
      - Consistent Deployment: Docker containers ensure consistency across different environments.
      - Isolation: Applications are encapsulated within containers, minimizing conflicts.
      - Portability: Containerized applications can run on any platform that supports Docker.
5. Developing Applications with Azure Service Fabric:
   - Developing applications with Azure Service Fabric involves the following steps:
      - Define Service Contracts: Clearly define the contracts for stateless and stateful services.
      - Implement Services: Write the code for your services, considering scalability and reliability requirements.
      - Package and Deploy: Package services into deployable units and deploy them on the Service Fabric cluster.
6. Service Fabric Reliable Services:
   - Azure Service Fabric ensures reliability through:
     - Replication: Replicating stateful services across multiple nodes for fault tolerance.
     - Load Balancing: Distributing incoming requests evenly among instances.
7. Scaling and Load Balancing:
   - Azure Service Fabric supports automatic scaling based on metrics or resource usage, ensuring optimal performance. Load balancing strategies include:
     - Round Robin: Distributing requests equally among instances.
     - Least Connections: Directing traffic to the instance with the fewest active connections.

8. Deployment Strategies:
   - Rolling Upgrades: Azure Service Fabric allows rolling upgrades, updating services without downtime. Best practices include:
   - Health Checks: Monitor the health of services during the upgrade process.
   - Version Compatibility: Ensure backward compatibility for a smooth transition.

9. Integration with Azure Services:
   - Azure Service Fabric seamlessly integrates with various Azure services, enabling:
     - Azure DevOps Integration: Streamlining the development and deployment process.
     - Azure Monitor: Monitoring and analyzing the performance of deployed applications.

10. Monitoring and Management:
    - Effective monitoring and management involve:
      - Azure Monitor: Collecting and analyzing telemetry data for insights.
      - Scaling Strategies: Adjusting resources based on performance metrics.

11. Use Cases and Case Studies:
    - eCommerce Platform:
      - Use Case: An eCommerce platform uses Azure Service Fabric to build a scalable and reliable microservices architecture. Each microservice handles specific functionalities like product catalog, order processing, and payment processing.
      - Case Study: The platform experiences increased traffic during peak shopping seasons. Azure Service Fabric's automatic scaling ensures that each microservice can dynamically handle varying loads, providing a seamless shopping experience.
      - IoT Solution:
      Use Case: An IoT solution leverages Azure Service Fabric for managing a network of IoT devices. Stateful services maintain device states and data, while stateless services handle real-time processing of incoming device data.
      - Case Study: As the number of connected devices grows, the solution scales horizontally by adding more instances of stateful services. Azure Service Fabric's reliability ensures that device data is consistently processed and stored.
      - Finance and Banking:
      Use Case: A financial institution uses Azure Service Fabric to develop a secure and scalable transaction processing system. Stateful services manage account states, while stateless services handle transaction validation and processing.
      - Case Study: During high transaction volumes, the institution benefits from Azure Service Fabric's automatic scaling, ensuring quick and reliable transaction processing without compromising security.
